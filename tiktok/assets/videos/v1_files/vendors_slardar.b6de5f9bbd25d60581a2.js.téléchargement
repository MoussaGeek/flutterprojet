(window["bytedance_secsdk_captcha_jsonp_2.21.2"]=window["bytedance_secsdk_captcha_jsonp_2.21.2"]||[]).push([[2],{441:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},r=function(t){return t&&t.Math==Math&&t},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n&&n)||function(){return this}()||Function("return this")(),i={},a=function(t){try{return!!t()}catch(e){return!0}},s=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),c={},u={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,p=l&&!u.call({1:2},1);c.f=p?function(t){var e=l(this,t);return!!e&&e.enumerable}:u;var f=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},d={}.toString,h=function(t){return d.call(t).slice(8,-1)},v=h,m="".split,g=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==v(t)?m.call(t,""):Object(t)}:Object,y=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t},_=g,b=y,w=function(t){return _(b(t))},S=function(t){return"object"===typeof t?null!==t:"function"===typeof t},E=S,M=function(t,e){if(!E(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!E(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!E(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!E(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},P=y,x=function(t){return Object(P(t))},R=x,j={}.hasOwnProperty,C=Object.hasOwn||function(t,e){return j.call(R(t),e)},O=S,H=o.document,L=O(H)&&O(H.createElement),A=function(t){return L?H.createElement(t):{}},T=!s&&!a(function(){return 7!=Object.defineProperty(A("div"),"a",{get:function(){return 7}}).a}),U=s,D=c,k=f,I=w,B=M,N=C,F=T,J=Object.getOwnPropertyDescriptor;i.f=U?J:function(t,e){if(t=I(t),e=B(e,!0),F)try{return J(t,e)}catch(n){}if(N(t,e))return k(!D.f.call(t,e),t[e])};var q={},z=S,W=function(t){if(!z(t))throw TypeError(String(t)+" is not an object");return t},Q=s,V=T,X=W,G=M,$=Object.defineProperty;q.f=Q?$:function(t,e,n){if(X(t),e=G(e,!0),X(n),V)try{return $(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Y=q,K=f,Z=s?function(t,e,n){return Y.f(t,e,K(1,n))}:function(t,e,n){return t[e]=n,t},tt={exports:{}},et=o,nt=Z,rt=function(t,e){try{nt(et,t,e)}catch(n){et[t]=e}return e},ot=rt,it=o["__core-js_shared__"]||ot("__core-js_shared__",{}),at=it,st=Function.toString;"function"!=typeof at.inspectSource&&(at.inspectSource=function(t){return st.call(t)});var ct=at.inspectSource,ut=ct,lt=o.WeakMap,pt="function"===typeof lt&&/native code/.test(ut(lt)),ft={exports:{}},dt=it;(ft.exports=function(t,e){return dt[t]||(dt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.2",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"});var ht,vt,mt,gt=0,yt=Math.random(),_t=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++gt+yt).toString(36)},bt=ft.exports,wt=_t,St=bt("keys"),Et={},Mt=pt,Pt=S,xt=Z,Rt=C,jt=it,Ct=function(t){return St[t]||(St[t]=wt(t))},Ot=Et,Ht=o.WeakMap;if(Mt||jt.state){var Lt=jt.state||(jt.state=new Ht),At=Lt.get,Tt=Lt.has,Ut=Lt.set;ht=function(t,e){if(Tt.call(Lt,t))throw new TypeError("Object already initialized");return e.facade=t,Ut.call(Lt,t,e),e},vt=function(t){return At.call(Lt,t)||{}},mt=function(t){return Tt.call(Lt,t)}}else{var Dt=Ct("state");Ot[Dt]=!0,ht=function(t,e){if(Rt(t,Dt))throw new TypeError("Object already initialized");return e.facade=t,xt(t,Dt,e),e},vt=function(t){return Rt(t,Dt)?t[Dt]:{}},mt=function(t){return Rt(t,Dt)}}var kt={set:ht,get:vt,has:mt,enforce:function(t){return mt(t)?vt(t):ht(t,{})},getterFor:function(t){return function(e){var n;if(!Pt(e)||(n=vt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},It=o,Bt=Z,Nt=C,Ft=rt,Jt=ct,qt=kt.get,zt=kt.enforce,Wt=String(String).split("String");(tt.exports=function(t,e,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||Nt(n,"name")||Bt(n,"name",e),(o=zt(n)).source||(o.source=Wt.join("string"==typeof e?e:""))),t!==It?(i?!s&&t[e]&&(a=!0):delete t[e],a?t[e]=n:Bt(t,e,n)):a?t[e]=n:Ft(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&qt(this).source||Jt(this)});var Qt=o,Vt=Qt,Xt=o,Gt=function(t){return"function"==typeof t?t:void 0},$t=function(t,e){return arguments.length<2?Gt(Vt[t])||Gt(Xt[t]):Vt[t]&&Vt[t][e]||Xt[t]&&Xt[t][e]},Yt={},Kt=Math.ceil,Zt=Math.floor,te=function(t){return isNaN(t=+t)?0:(t>0?Zt:Kt)(t)},ee=te,ne=Math.min,re=function(t){return t>0?ne(ee(t),9007199254740991):0},oe=te,ie=Math.max,ae=Math.min,se=w,ce=re,ue=function(t,e){var n=oe(t);return n<0?ie(n+e,0):ae(n,e)},le=function(t){return function(e,n,r){var o,i=se(e),a=ce(i.length),s=ue(r,a);if(t&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===n)return t||s||0;return!t&&-1}},pe={includes:le(!0),indexOf:le(!1)},fe=C,de=w,he=pe.indexOf,ve=Et,me=function(t,e){var n,r=de(t),o=0,i=[];for(n in r)!fe(ve,n)&&fe(r,n)&&i.push(n);for(;e.length>o;)fe(r,n=e[o++])&&(~he(i,n)||i.push(n));return i},ge=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ye=me,_e=ge.concat("length","prototype");Yt.f=Object.getOwnPropertyNames||function(t){return ye(t,_e)};var be={};be.f=Object.getOwnPropertySymbols;var we,Se,Ee=Yt,Me=be,Pe=W,xe=$t("Reflect","ownKeys")||function(t){var e=Ee.f(Pe(t)),n=Me.f;return n?e.concat(n(t)):e},Re=C,je=xe,Ce=i,Oe=q,He=a,Le=/#|\.prototype\./,Ae=function(t,e){var n=Ue[Te(t)];return n==ke||n!=De&&("function"==typeof e?He(e):!!e)},Te=Ae.normalize=function(t){return String(t).replace(Le,".").toLowerCase()},Ue=Ae.data={},De=Ae.NATIVE="N",ke=Ae.POLYFILL="P",Ie=Ae,Be=o,Ne=i.f,Fe=Z,Je=tt.exports,qe=rt,ze=function(t,e){for(var n=je(e),r=Oe.f,o=Ce.f,i=0;i<n.length;i++){var a=n[i];Re(t,a)||r(t,a,o(e,a))}},We=Ie,Qe=function(t,e){var n,r,o,i,a,s=t.target,c=t.global,u=t.stat;if(n=c?Be:u?Be[s]||qe(s,{}):(Be[s]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=Ne(n,r))&&a.value:n[r],!We(c?r:s+(u?".":"#")+r,t.forced)&&void 0!==o){if(typeof i===typeof o)continue;ze(i,o)}(t.sham||o&&o.sham)&&Fe(i,"sham",!0),Je(n,r,i,t)}},Ve=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Xe=function(t,e,n){if(Ve(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Ge=h,$e=Array.isArray||function(t){return"Array"==Ge(t)},Ye=$t("navigator","userAgent")||"",Ke=o.process,Ze=Ke&&Ke.versions,tn=Ze&&Ze.v8;tn?Se=(we=tn.split("."))[0]<4?1:we[0]+we[1]:Ye&&(!(we=Ye.match(/Edge\/(\d+)/))||we[1]>=74)&&(we=Ye.match(/Chrome\/(\d+)/))&&(Se=we[1]);var en=Se&&+Se,nn=a,rn=!!Object.getOwnPropertySymbols&&!nn(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&en&&en<41}),on=rn&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,an=o,sn=ft.exports,cn=C,un=_t,ln=rn,pn=on,fn=sn("wks"),dn=an.Symbol,hn=pn?dn:dn&&dn.withoutSetter||un,vn=S,mn=$e,gn=function(t){return cn(fn,t)&&(ln||"string"==typeof fn[t])||(ln&&cn(dn,t)?fn[t]=dn[t]:fn[t]=hn("Symbol."+t)),fn[t]}("species"),yn=Xe,_n=g,bn=x,wn=re,Sn=function(t,e){var n;return mn(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!mn(n.prototype)?vn(n)&&null===(n=n[gn])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},En=[].push,Mn=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=7==t,s=5==t||i;return function(c,u,l,p){for(var f,d,h=bn(c),v=_n(h),m=yn(u,l,3),g=wn(v.length),y=0,_=p||Sn,b=e?_(c,g):n||a?_(c,0):void 0;g>y;y++)if((s||y in v)&&(d=m(f=v[y],y,h),t))if(e)b[y]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return y;case 2:En.call(b,f)}else switch(t){case 4:return!1;case 7:En.call(b,f)}return i?-1:r||o?o:b}},Pn={forEach:Mn(0),map:Mn(1),filter:Mn(2),some:Mn(3),every:Mn(4),find:Mn(5),findIndex:Mn(6),filterOut:Mn(7)},xn=a,Rn=Pn.forEach,jn=function(t,e){var n=[][t];return!!n&&xn(function(){n.call(null,e||function(){throw 1},1)})}("forEach")?[].forEach:function(t){return Rn(this,t,arguments.length>1?arguments[1]:void 0)};Qe({target:"Array",proto:!0,forced:[].forEach!=jn},{forEach:jn});var Cn=o,On=Xe,Hn=Function.call;(function(t,e,n){On(Hn,Cn[t].prototype[e],n)})("Array","forEach"),function(t){var e,n;if(t&&!("href"in(null!==(n=null===(e=t.URL)||void 0===e?void 0:e.prototype)&&void 0!==n?n:{}))){o.prototype={toString:function(){return this.href},get href(){return this._anchorElement.href},set href(t){this._anchorElement.href=t},get protocol(){return this._anchorElement.protocol},set protocol(t){this._anchorElement.protocol=t},get host(){return this._anchorElement.host},set host(t){this._anchorElement.host=t},get hostname(){return this._anchorElement.hostname},set hostname(t){this._anchorElement.hostname=t},get port(){return this._anchorElement.port},set port(t){this._anchorElement.port=t},get pathname(){return this._anchorElement.pathname},set pathname(t){this._anchorElement.pathname=t},get search(){return this._anchorElement.search},set search(t){this._anchorElement.search=t},get hash(){return this._anchorElement.hash},set hash(t){this._anchorElement.hash=t}};var r=t.URL||t.webkitURL||t.mozURL;o.createObjectURL=function(t){return r.createObjectURL(t)},o.revokeObjectURL=function(t){return r.revokeObjectURL(t)},Object.defineProperty(o.prototype,"toString",{enumerable:!1}),t.URL=o}function o(t,e){if(!t)throw new TypeError("Invalid argument");var n=document.implementation.createHTMLDocument("");if(e){var r=n.createElement("base");r.href=e,n.head.appendChild(r)}var o=n.createElement("a");if(o.href=t,n.body.appendChild(o),":"===o.protocol||!/:/.test(o.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:o})}}("undefined"!==typeof n?n:"undefined"!==typeof window?window:"undefined"!==typeof self?self:n),function(){if(!Element.prototype.addEventListener){var t=[],e=function(e,n){var r=this,o=function(t){t.target=t.srcElement,t.currentTarget=r,"undefined"!==typeof n.handleEvent?n.handleEvent(t):n.call(r,t)};if("DOMContentLoaded"===e){var i=function(t){"complete"===document.readyState&&o(t)};if(document.attachEvent("onreadystatechange",i),t.push({object:this,type:e,listener:n,wrapper:i}),"complete"===document.readyState){var a=new Event;a.srcElement=window,i(a)}}else this.attachEvent("on"+e,o),t.push({object:this,type:e,listener:n,wrapper:o})},n=function(e,n){for(var r=0;r<t.length;){var o=t[r];if(o.object===this&&o.type===e&&o.listener===n){"DOMContentLoaded"===e?this.detachEvent("onreadystatechange",o.wrapper):this.detachEvent("on"+e,o.wrapper),t.splice(r,1);break}++r}};Element.prototype.addEventListener=e,Element.prototype.removeEventListener=n,HTMLDocument&&!HTMLDocument.prototype.addEventListener&&(HTMLDocument.prototype.addEventListener=e,HTMLDocument.prototype.removeEventListener=n),Window&&!Window.prototype.addEventListener&&(Window.prototype.addEventListener=e,Window.prototype.removeEventListener=n)}}();var Ln=me,An=ge,Tn=Object.keys||function(t){return Ln(t,An)},Un=x,Dn=Tn;Qe({target:"Object",stat:!0,forced:a(function(){Dn(1)})},{keys:function(t){return Dn(Un(t))}}),Qt.Object.keys;var kn=function(t,e){return(kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function In(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}kn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Bn=function(){return(Bn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Nn(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function Fn(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jn(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function qn(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||e)}function zn(t){return"object"===typeof t&&null!==t&&!Vn(t)}function Wn(t){return"function"===typeof t}function Qn(t){return"[object String]"===Object.prototype.toString.call(t)}function Vn(t){return"[object Array]"===Object.prototype.toString.call(t)}function Xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Gn(t,e){if(zn(t))for(var n in t)Xn(t,n)&&e.call(null,n,t[n])}function $n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0;r<t.length;)n=tr(n,t[r]),r++;return n}var Yn=Object.getPrototypeOf?Object.getPrototypeOf({}):null;function Kn(t){return Object.getPrototypeOf?Object.getPrototypeOf(t)===Yn:t.constructor===Object}function Zn(t,e){var n=Bn({},t);for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&void 0!==e[r]&&(zn(e[r])&&Kn(e[r])?n[r]=tr(zn(t[r])?t[r]:{},e[r]):Vn(e[r])?n[r]=e[r].slice():n[r]=e[r]);return n}function tr(t,e){var n=Bn({},t);for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&void 0!==e[r]&&(zn(e[r])&&Kn(e[r])?n[r]=tr(zn(t[r])?t[r]:{},e[r]):Vn(t[r])||Vn(e[r])?n[r]=er(t[r],e[r]):n[r]=e[r]);return n}function er(t,e){var n=Vn(t)?t:[],r=Vn(e)?e:[];return Array.prototype.concat.call(n,r).map(function(t){return t instanceof RegExp?t:Vn(t)||zn(t)&&Kn(t)?Vn(t)?er([],t):tr({},t):t})}function nr(t,e){if(!Vn(t))return!1;if(0===t.length)return!1;for(var n=0;n<t.length;){if(t[n]===e)return!0;n++}return!1}function rr(){return!!zn(window)}function or(){return!(!rr()||!zn(window.performance))&&!!zn(window.performance.timing)}function ir(t){var e=function(t){var e={};return Gn(t,function(t,n){e[encodeURIComponent(t)]=encodeURIComponent(n)}),e}(function(t){if(!zn(t))return{};var e={};return Gn(t,function(t,n){zn(n)||Vn(n)?e[t]=JSON.stringify(n):e[t]=n}),e}(t)),n=[];return Gn(e,function(t,e){n.push(t+"="+e)}),n.join("&")}function ar(t){var e=document.createElement("a");e.href=t;var n=e.pathname||"/";return"/"!==n[0]&&(n="/"+n),{href:e.href,protocol:e.protocol.slice(0,-1),hostname:e.hostname,host:e.host,search:e.search,pathname:n,hash:e.hash}}var sr=new RegExp("("+["cookie","auth","jwt","token","key","ticket","secret","credential","session","password"].join("|")+")","i"),cr=new RegExp("("+["bearer","session"].join("|")+")","i"),ur=function(t,e){return!(!t||!e)&&(sr.test(t)||cr.test(e))};function lr(){}function pr(t){var e="[object String]"===Object.prototype.toString.call(t);return t?e?t.length:ArrayBuffer&&t instanceof ArrayBuffer?t.byteLength:window.Blob&&t instanceof Blob?t.size:t.length?t.length:0:0}function fr(t){if(!t)return"";if(!Wn(t.forEach))return"";var e=[];return t.forEach(function(t){if(Vn(t)&&t[0]&&!ur(t[0],t[1])){var n=t[0],r=t[1]||"";e.push(n+": "+r)}}),e.join("\r\n")}function dr(t){var e={},n=ar(t);return e.ax_protocol=n.protocol,e.ax_domain=n.hostname,e.ax_path=n.pathname,e.ax_url=(n.href||t).split("?")[0],e.ax_search=n.search,e.ax_href=n.href,e}function hr(t){return Vn(t)&&t.length?function(t){for(var e=[],n=t.length,r=0;r<n;r++){var o=t[r];Qn(o)?e.push(o.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")):o&&o.source&&e.push(o.source)}return new RegExp(e.join("|"),"i")}(t):null}var vr=function(t){var e,n;return void 0===t&&(t=window),rr()&&(null===(e=t.screen)||void 0===e?void 0:e.width)&&(null===(n=t.screen)||void 0===n?void 0:n.height)?t.screen.width+"x"+t.screen.height:"0x0"},mr=function(){var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return t&&Qn(t.effectiveType)?t.effectiveType:"unknown"},gr=function(t,e){Wn(t)&&(Wn(window.addEventListener)&&(window.addEventListener("unload",t),window.addEventListener("beforeunload",t),window.addEventListener("pagehide",t)),Wn(document.addEventListener)&&document.addEventListener("visibilitychange",function(n){Wn(e)?e(n):"hidden"===document.visibilityState&&t(n)}))};function yr(t){return!!t&&Math.random()<Number(t)}var _r=function(){function t(e){var n=this;this.postEvent=function(e){var r=Bn(Bn({},e),n.getCommonParams());t.post(n.url,r)},this.getEvent=function(e){var r=ir(Bn(Bn({},e),n.getCommonParams())),o=n.url+"?"+r;t.get(o)},this.getURL=function(){return n.url},this.options=e,this.url=this.options.reportURL}return t.post=function(t,e,n){var r=n&&n.success||lr,o=n&&n.fail||lr,i=new XMLHttpRequest;i.open("POST",t,!0),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(e)),i.onload=function(){try{if(this.responseText){var t=JSON.parse(this.responseText);r(t)}else r({})}catch(e){o()}},i.onerror=function(){o()},i.onabort=function(){o()}},t.get=function(t,e){var n=e&&e.success||lr,r=e&&e.fail||lr,o=e&&e.getResponse||lr,i=e&&e.getResponseText||lr,a=new XMLHttpRequest;e&&e.withCredentials&&(a.withCredentials=e.withCredentials),a.open("GET",t),a.send(),a.onload=function(){o(null===this||void 0===this?void 0:this.response),i(this.responseText);try{if(this.responseText){var t=JSON.parse(this.responseText);n(t)}else n({})}catch(e){r()}},a.onerror=function(){r()},a.onabort=function(){r()}},t.prototype.getCommonParams=function(){return{timestamp:Date.now()}},t}();function br(t,e,n){if(void 0===n&&(n="0"),n.length>1)throw new TypeError("expect the length of pad to be 1, but got "+t.length);return t.length>=e?t:""+Array.from({length:e-t.length}).fill(n).join("")+t}function wr(t){return t?Math.floor(Math.random()*Math.pow(10,12)).toString(16).substr(0,t):""}var Sr="00",Er=4294967295;function Mr(t,e,n){void 0===n&&(n="01");var r=""+br((Date.now()%Er).toString(16),8)+function(t){var e;if("number"===typeof t)e=t;else{var n=t.replace(/-/g,"");if(!/^[0-9]+$/.test(n)){if(n.length>18)return"18"+wr(18);var r=22-n.length-4;return""+br(""+n.length,2)+n+wr(r)}e=parseInt(n,10)}var o=e.toString(16),i=22-o.length-4;return""+br(""+o.length,2)+o+wr(i)}(t)+("string"===typeof e?wr(4):br(e.toString(16),4));return Sr+"-"+r+"-"+r.substr(0,16)+"-"+n}function Pr(){var t=function(){for(var t=new Array(16),e=0,n=0;n<16;n++)0===(3&n)&&(e=4294967296*Math.random()),t[n]=e>>>((3&n)<<3)&255;return t}();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,function(t){for(var e=[],n=0;n<256;++n)e[n]=(n+256).toString(16).substr(1);var r=0,o=e;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}(t)}var xr=1,Rr=.1,jr=.1,Cr=["/log/sentry/","/monitor_browser/collect"],Or=8e3,Hr=4e3,Lr=Pr(),Ar=Pr(),Tr=function(){};function Ur(t,e){if(void 0===e&&(e=Tr),t&&Qn(t)&&rr()&&zn(document)&&Wn(document.createElement)){var n=document.createElement("script"),r=document.head;zn(n)&&zn(r)&&(n.src=t,n.async=!0,n.crossOrigin="anonymous",n.onload=function(){e()},Wn(r.appendChild)&&r.appendChild(n))}}function Dr(){try{return new Headers,new Request(""),new Response,window.fetch}catch(t){}}function kr(){if(zn(window))return window}function Ir(){if(zn(document))return document}function Br(){if(kr()&&zn(window.performance))return window.performance}function Nr(){if(Wn(XMLHttpRequest))return XMLHttpRequest}var Fr=function(t,e,n){var r=t.commonParams,o=t.ajaxMonitorOptions,i=r||{},a=i.bid,s=i.web_id,c=(o||{}).sampleHitTrace,u=function(t,e){var n=ar(t),r=ar(e);return n.protocol===r.protocol&&n.host===r.host}(n,e);return a&&s&&c&&u},Jr=function(t,e,n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(!t)return lr;var i=t[e],a=n.apply(void 0,qn([i],Jn(r))),s=a;return Wn(s)&&(s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return a.apply(this,t)}catch(n){return Wn(i)&&i.apply(this,t)}}),t[e]=s,function(n){n&&s!==t[e]||(t[e]=i)}}};function qr(t,e){return t instanceof e}function zr(t,e){return t instanceof e}var Wr=function(t){var e,n;return null!==(n=null===(e=t.ajaxMonitorOptions)||void 0===e?void 0:e.errorRequestCollect)&&void 0!==n&&n},Qr=function(t){var e=t,n={},r=function(){return Object.keys(e).forEach(function(t){return!(t in n)&&Object.defineProperty(n,t,{get:function(){return e[t]}})})};return r(),[n,function(t){e=$n({},e,t),r()}]},Vr=function(t){var e=t&&t.timing||void 0;return[e,function(){return t&&t.now?t.now():(Date.now?Date.now():+new Date)-(e&&e.navigationStart||0)},function(e){var n=(t||{}).getEntriesByType;return Wn(n)&&n.call(t,e)||[]},function(){var e=(t||{}).clearResourceTimings;Wn(e)&&e.call(t)},function(e){var n=(t||{}).getEntriesByName;return Wn(n)&&n.call(t,e)||[]}]},Xr=function(t){var e,n=window.requestAnimationFrame,r=window.cancelAnimationFrame,o=!Wn(n)||t&&document&&document.hidden?function(t){return t(0),0}:n,i=Wn(r)?r:lr;return[function(t){e&&i(e),e=o(t)},o,i]};function Gr(t,e){return void 0===e&&(e=Br()),(0,Jn(Vr(e),5)[4])(t).pop()}var $r=function(t,e,n,r){var o,i=t._method,a=t._requestHeaders,s=t._url,c=t._start,u=t._data,l={ev_type:"ajax",ax_status:(t.status||0).toString(),ax_type:i,ax_request_header:fr(a||[]),ax_domain:"",ax_duration:0,ax_path:"",ax_protocol:"",ax_response_header:"",ax_size:0,ax_url:"",ax_href:""};if("function"===typeof t.getAllResponseHeaders&&(l.ax_response_header=function(t){if(Qn(t)){var e=t.split("\r\n"),n=[];return e.forEach(function(t,e){if(t&&Wn(t.split)){var r=t.split(": ");ur(r[0],r[1])||n.push([r[0],r[1]])}}),fr(n)}return zn(t)?fr(Object.keys(t).filter(function(e){return!ur(e,t[e])}).map(function(e){return[e,t[e]]})):t}(t.getAllResponseHeaders())),Fr(e,s,r)){var p=n||t.getResponseHeader("x-tt-trace-id");p&&(l.trace_id=p,l.trace_host=t.getResponseHeader("x-tt-trace-host")||void 0,l.log_id=t.getResponseHeader("x-tt-logid")||void 0)}l.ax_duration=Date.now()-c,200===t.status&&(l.ax_size=function(t){if(""===t.responseType||"text"===t.responseType)return pr(t.responseText);if(t.response)return pr(t.response);try{return pr(t.responseText)}catch(o){return 0}}(t)),(l=Bn(Bn({},l),dr(s))).resource_timing=Gr(l.ax_href);var f=l.ax_status;return Wr(e)&&"2"!==f[0]&&"3"!==f[0]&&(l.ax_request={body:u?""+u:void 0,search:ar(s).search,content_type:a&&(null===(o=a.find(function(t){return"content-type"===t[0].toLowerCase()}))||void 0===o?void 0:o[1])}),l},Yr=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Jn(e,2),o=r[0],i=r[1];return this._url=i||"",this._method=o&&o.toLowerCase()||"",t.apply(this,e)}},Kr=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._requestHeaders=this._requestHeaders||[],this._requestHeaders.push(e),t&&t.apply(this,e)}},Zr=function(t,e,n,r){var o=null;return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(Fr(e,this._url,r)){var s=e.commonParams||{},c=s.bid,u=s.web_id;c&&u&&(o=Mr(u,c),this.setRequestHeader("x-tt-trace-id",o))}return to(this)(e,o,n,r),this._start=Date.now(),this._data=null===i||void 0===i?void 0:i[0],t.apply(this,i)}},to=function(t){return Jr(t,"onreadystatechange",function(e,n,r,o,i){return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return 4===this.readyState&&o&&o({name:"AjaxMonitor",type:"get",event:$r(t,n,r,i)}),e&&e.apply(this,a)}})},eo=function(t,e,n){void 0===e&&(e=!1);var r="";return r=qr(t,n)?t.url:t,e||(r=Qn(r)?r.split("?")[0]:r),r};var no=function(t,e,n){return qr(t,n)?t.body:null===e||void 0===e?void 0:e.body},ro=function(t,e){if(!t)return"";var n=[];return zr(t,e)?t.forEach(function(t,e){n.push([e,t])}):Vn(t)?n.push.apply(n,qn([],Jn(t))):n.push.apply(n,qn([],Jn(Object.entries(t)))),fr(n)};function oo(t,e,n){if(t){if(zr(t,n))return t.get(e)||void 0;if(Vn(t)){var r=t.find(function(t){return e===t[0]});return null===r||void 0===r?void 0:r[1]}return t[e]}}var io=function(t,e,n,r,o,i){return function(a,s){void 0===s&&(s={});var c=eo(a,void 0,o);if(!function(t){if(!Qn(t))return!1;var e=Jn(t.split(":"),2),n=e[0];return!e[1]||"http"===n||"https"===n}(c))return t(a,s);var u=e.commonParams||{},l=u.bid,p=u.web_id,f=Date.now(),d={ev_type:"ajax",ax_size:0};try{Fr(e,c,i)&&(s.headers||(s.headers=[]),l&&p&&(d.trace_id=Mr(l,p),function(t,e,n,r){zr(t,r)?t.append(e,n):Vn(t)?t.push([e,n]):t[e]=n}(s.headers,"x-tt-trace-id",d.trace_id,r)))}catch(v){}d.ax_type=function(t,e,n){var r=e&&e.method||"get";return qr(t,n)&&(r=t.method||r),r.toLowerCase()}(a,s,o),d=Bn(Bn({},d),dr(eo(a,!0,o)));var h=function(){d.resource_timing=Gr(d.ax_href),function(t,e,n,r,o,i){var a,s=e.ax_status;if(Wr(t)&&"2"!==s[0]&&"3"!==s[0]){var c=eo(n,!0,o);e.ax_request={body:null===(a=no(n,r,o))||void 0===a?void 0:a.toString(),search:ar(c).search,content_type:oo(r.headers,"Content-Type",i)}}}(e,d,a,s,o,r),null===n||void 0===n||n({name:"FetchMonitor",type:"get",event:d})};return t(a,s).then(function(t){var n;try{d.ax_status=(t.status||0).toString(),d.ax_duration=Date.now()-f,d.ax_response_header=ro(t.headers,r),d.ax_request_header=ro(function(t,e,n,r){var o=new n;return qr(t,r)&&t.headers&&Wn(t.headers.forEach)&&t.headers.forEach(function(t,e){o.append(e,t)}),e.headers&&new n(e.headers).forEach(function(t,e){o.append(e,t)}),o}(a,s,r,o),r);var u=function(e,n){t.headers.has(e)&&(d[n]=t.headers.get(e)||void 0)};Wn(null===(n=t.headers)||void 0===n?void 0:n.has)&&(t.headers.has("content-length")&&(d.ax_size=Number(t.headers.get("content-length"))||0),Fr(e,c,i)&&(u("x-tt-trace-host","trace_host"),u("x-tt-trace-id","trace_id"),u("x-tt-logid","log_id"))),setTimeout(function(){h()},100)}catch(v){}return t},function(t){try{d.ax_status="0",d.ax_duration=Date.now()-f,h()}catch(u){}return Promise.reject(t)})}},ao=["SCRIPT","STYLE","META","HEAD"],so=function t(e,n,r,o){if(!e||o.indexOf(e.tagName)>-1)return 0;var i=e.children,a=void 0===i?[]:i,s=[].slice.call(a).reduceRight(function(e,r){return e+t(r,n+1,e>0,o)},0);if(s<=0&&!r){if(!Wn(e.getBoundingClientRect))return 0;var c=e.getBoundingClientRect()||{},u=c.top,l=c.height;if(u>window.innerHeight||l<=0)return 0}return s+1+.5*n},co=function(t,e,n){var r;return void 0===t&&(t=Ir()),void 0===e&&(e=function(){if(kr()&&Wn(window.MutationObserver))return window.MutationObserver}()),void 0===n&&(n=null===(r=function(){var t=Br();if(t&&zn(t.timing))return t.timing}())||void 0===r?void 0:r.navigationStart),function(r,o){var i=Date.now(),a=[],s=ao.concat(r.ignoreTags||[]),c=function(){return a.push({time:Date.now()-i,score:so(t&&t.body,1,!1,s)})},u=Jn(Xr(!0),1)[0],l=Jn(function(t,e){var n=t&&new t(e);return[function(t,e){n&&t&&n.observe(t,e)},function(){return n&&n.disconnect()}]}(e,function(){return u(c)}),2),p=l[0],f=l[1],d=function(t){void 0===t&&(t=0),f();var e=function(t){var e=Jn(void 0===t?[]:t),n=e[0],r=e.slice(1);return r&&r.reduce(function(t,e){var n=Jn(t,2),r=n[0],o=n[1],i=e.score-r.score;return[e,e.time>=r.time&&o.rate<i?{time:e.time,rate:i}:o]},[n,{time:null===n||void 0===n?void 0:n.time,rate:0}])[1].time||0}(a),n={name:"FMPMonitor",type:"post",event:{ev_type:"fmp",fmp:e?e+t:0}};return o&&o(n),n},h=i-(n||0);return p(t,{subtree:!0,childList:!0}),[f,d,d.bind(null,h)]}},uo="PathMonitor",lo=function(){function t(){this.name=uo,this.callback=lr,this.onPathChange=lr,this.currentURL=""}return t.prototype.setup=function(t){rr()&&(this.currentURL=location.href,this.callback=t,this.start())},t.prototype.onChange=function(t){this.onPathChange=t},t.prototype.start=function(){this.monitorHashChange(),rr()&&zn(window.history)&&Wn(window.history.pushState)&&Wn(window.history.replaceState)&&(this.monitorPopState(),this.monitorPushState(),this.monitorReplaceState())},t.prototype.monitorPopState=function(){var t=this;window.addEventListener("popstate",function(){t.handleStateChange(t.currentURL,location.href),t.replaceCurrentURL(location.href)})},t.prototype.monitorHashChange=function(){var t=this;window.addEventListener("hashchange",function(){var e=t.parseHash(location.hash);e&&t.pathChangeHandler(t.getPath(e),"hash"),t.replaceCurrentURL(location.href)})},t.prototype.monitorPushState=function(){var t=this,e=window.history.pushState;e&&(window.history.pushState=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(this,n)}finally{t.handleHistoryStateChange.apply(t,qn([],Jn(n)))}})},t.prototype.monitorReplaceState=function(){var t=this,e=window.history.replaceState;e&&(window.history.replaceState=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(this,n)}finally{t.handleHistoryStateChange.apply(t,qn([],Jn(n)))}})},t.prototype.pathChangeHandler=function(t,e,n){Qn(t)&&Wn(this.callback)&&(this.onPathChange&&this.onPathChange({path:t,type:e,url:n}),this.callback({name:this.name,type:"get",event:{ev_type:"pageview",path:t,type:e}}))},t.prototype.handleHistoryStateChange=function(t,e,n){n&&(this.handleStateChange(this.currentURL,n),this.replaceCurrentURL(n))},t.prototype.handleStateChange=function(t,e){var n=this.parseURL(t),r=this.parseURL(e);r&&n&&(r.pathname===n.pathname?r.hash!==n.hash&&this.pathChangeHandler(this.getPath(r.hash),"hash",r):this.pathChangeHandler(this.getPath(r.pathname),"pathname",r))},t.prototype.parseURL=function(t){if(!t)return null;if("string"!==typeof t)return null;if(t.match(/^\/[^\/]/))return new URL(location.protocol+"//"+location.host+t);try{return new URL(t)}catch(e){return null}},t.prototype.parseHash=function(t){return t?"string"!==typeof t?"/":t.replace(/^#/,""):"/"},t.prototype.getPath=function(t){var e=t&&"string"===typeof t?t.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):"";return e=this.parseHash(e)},t.prototype.replaceCurrentURL=function(t){this.currentURL!==t&&(this.currentURL=t)},t.monitorName=uo,t}(),po=function(t,e,n,r){var o=function(){function n(e){this.props=e,this.name=t}return n.prototype.setup=function(t){this.monitor=function(t,e,n,r){void 0===e&&(e={}),void 0===r&&(r=[]);try{var o=t.apply(void 0,qn([],Jn(r)));return o&&o(e,n)||[]}catch(i){return[]}}(e,this.props,t,r)},n.monitorName=t,n}();return n.forEach(function(t,e){return o.prototype[t]=function(){for(var t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return null===(n=null===(t=this.monitor)||void 0===t?void 0:t[e])||void 0===n?void 0:n.call.apply(n,qn([t],Jn(r)))}}),o},fo=po("AjaxMonitor",function(t,e){void 0===t&&(t=Nr()),void 0===e&&(e=null===location||void 0===location?void 0:location.href);var n=t&&t.prototype;if(n)return function(t,r){var o=Jn(Qr(t),2),i=o[0],a=o[1];return Jr(n,"open",Yr)(),Jr(n,"send",Zr)(i,r,e||""),Jr(n,"setRequestHeader",Kr)(),[a]}},["updateConfig"]),ho=po("FetchMonitor",function(t,e,n,r){if(void 0===t&&(t=Dr()&&kr()),void 0===e&&(e=window.Headers),void 0===n&&(n=window.Request),void 0===r&&(r=null===location||void 0===location?void 0:location.href),t&&e&&n)return function(o,i){var a=Jn(Qr(o),2),s=a[0],c=a[1];return Jr(t,"fetch",io)(s,i,e,n,r||""),[c]}},["updateConfig"]),vo=function(){function t(){}return t.prototype.sendEvent=function(t){var e=this.getEventToBeSent(t);e&&this.idleSendEvent(e)},t.prototype.getEventToBeSent=function(t){var e=this._modifyEvent(t);if(this._shouldSend(e))return e},t.prototype._modifyEvent=function(t){return t},t.prototype._shouldSend=function(t){return!0},t.prototype._send=function(t){},t.prototype.idleSendEvent=function(t){this._send(t)},t}(),mo=10,go=1e3,yo=function(t){function e(e){var n,r,o=t.call(this)||this;return o.reportQueue=[],o.isReady=!0,o.batchReportLength=null!==(n=e.maxBatchReportLength)&&void 0!==n?n:mo,o.batchReportWait=null!==(r=e.batchReportWait)&&void 0!==r?r:go,o.batchReportTimeout=null,o}return In(e,t),Object.defineProperty(e.prototype,"ready",{get:function(){return this.isReady},set:function(t){this.isReady=t,this.isReady&&this._uploadQueue()},enumerable:!1,configurable:!0}),e.prototype._send=function(t){var e=this,n=this.buildParams(t);null===n||function(t){return void 0===t}(n)||(this.reportQueue.push(n),this.isReady&&(this.reportQueue.length>=this.batchReportLength&&this._uploadQueue(),this.batchReportTimeout&&clearTimeout(this.batchReportTimeout),this.batchReportTimeout=setTimeout(function(){e._uploadQueue()},this.batchReportWait)))},e.prototype._uploadQueue=function(){if(this.reportQueue.length&&this.ready){var t={ev_type:"batch",list:this.reportQueue};this.reportQueue=[],this._request({event:t,type:"post"})}},e.prototype._request=function(t){},e}(vo),_o="https://sf16-scmcdn-va.ibytedtos.com/goofy/slardar/fe/sdk/plugins",bo=_o+"/sentry.3.6.36.maliva.js",wo=_o+"/behavior.3.6.36.maliva.js",So="mon-va.byteoversea.com";function Eo(t){return!!t&&Math.random()<Number(t)}function Mo(t,e){return zn(t)?zn(e)?Bn(Bn({},t),{overrides:e}):t:{}}var Po=function(t){return"https://"+(null!==t&&void 0!==t?t:So)+"/log/sentry/v2/api/slardar/main/"},xo=function(t){return"https://"+(null!==t&&void 0!==t?t:So)+"/log/sentry/v2/api/slardar/batch/"},Ro=function(t){return"https://"+(null!==t&&void 0!==t?t:So)+"/slardar/sdk_setting"};function jo(t){return"error"===t.type}function Co(t){return"unhandledrejection"===t.type}function Oo(t){var e,n,r;if((null===(e=window.__SLARDAR__)||void 0===e?void 0:e.plugins)&&Vn(null===(n=window.__SLARDAR__)||void 0===n?void 0:n.plugins)){var o=null===(r=window.__SLARDAR__)||void 0===r?void 0:r.plugins,i=void 0;return o.forEach(function(e){e.version===t.version&&e[t.name]&&(i=e[t.name])}),i}}var Ho=Object.freeze({__proto__:null,isHitBySampleRate:Eo,rebuildSendData:Mo,getSingleReportURL:Po,getBatchReportURL:xo,getSettingURL:Ro,getHeatMapDataURL:function(t){return"https://"+(null!==t&&void 0!==t?t:So)+"/api_v2/browser/heatmap/common_data"},getHeatMapScrollDataURL:function(t){return"https://"+(null!==t&&void 0!==t?t:So)+"/api_v2/browser/heatmap/scroll_data"},isErrorEvent:jo,isPromiseRejectionEvent:Co,getMonitors:function(t,e){var n;return t.forEach(function(t){t.name===e&&(n=t)}),n},addPlugin:function(t){var e,n;if(window.__SLARDAR__||(window.__SLARDAR__={}),window.__SLARDAR__){var r=t.plugin.version,o=((e={version:r})[t.pluginName]=t.plugin,e),i=null!==(n=window.__SLARDAR__.plugins)&&void 0!==n?n:[],a=[],s=!1;i.forEach(function(e){e.version===r&&("SetMonitors"!==t.pluginName||e.SetMonitors||(e[t.pluginName]=t.plugin),"SetSentryMonitors"!==t.pluginName||e.SetSentryMonitors||(e[t.pluginName]=t.plugin),"SetHeatmap"!==t.pluginName||e.SetHeatmap||(e[t.pluginName]=t.plugin),"SetHeatmapDraw"!==t.pluginName||e.SetHeatmapDraw||(e[t.pluginName]=t.plugin),"SetHeatmapMouseDraw"!==t.pluginName||e.SetHeatmapMouseDraw||(e[t.pluginName]=t.plugin),"SetHeatmapScrollDraw"!==t.pluginName||e.SetHeatmapScrollDraw||(e[t.pluginName]=t.plugin),s=!0),a.push(e)}),s||a.push(o),window.__SLARDAR__.plugins=a}},getPlugin:Oo}),Lo=function(t){function e(e){var n,r=t.call(this,null!==e&&void 0!==e?e:{reportURL:""})||this;return r.setTransport=function(){r.transport||(r.transport=new _r({reportURL:r.getReportURL()}),r.updateStatus())},r.setOnOptionsUpdate=function(t){r.onOptionsUpdate=t},r.uploadQueue=function(){r._uploadQueue()},r.updateConfig=function(t){var e,n,o,i=null===(n=null===(e=r.options)||void 0===e?void 0:e.commonParams)||void 0===n?void 0:n.pid;r.options=r.normalizeOptions(t),i&&(null===(o=null===t||void 0===t?void 0:t.commonParams)||void 0===o?void 0:o.pid)&&t.commonParams.pid!==i&&r.sendPageview(),r.onOptionsUpdate&&r.onOptionsUpdate(r.options)},r.sendPageview=function(){Wn(r.sendEvent)&&r.sendEvent({name:"PageViewMonitor",type:"get",event:{ev_type:"pageview"}})},r.sendEvent=function(e){r.chechIsReady()?t.prototype.sendEvent.call(r,e):r.preQueue.push(e)},r.buildSendParams=function(t){return r.buildParams(t)},r.reportURL=null!==(n=null===e||void 0===e?void 0:e.reportURL)&&void 0!==n?n:"",r.preQueue=[],r.clientStatus=0,r.enable=!1,r}return In(e,t),e.prototype.setEnable=function(t){this.enable||(this.enable=t,this.enable&&this.updateStatus())},e.prototype.getReportURL=function(){return this.reportURL||this.getBatchReportURL()},Object.defineProperty(e.prototype,"contextAgent",{get:function(){var t=this,e={set:function(n,r){return t.options?(t.options.commonParams.context||(t.options.commonParams.context={}),t.options.commonParams.context[n]=r,e):e},delete:function(n){var r;return(null===(r=t.options)||void 0===r?void 0:r.commonParams.context)&&"string"!==typeof t.options.commonParams.context&&Xn(t.options.commonParams.context,n)&&delete t.options.commonParams.context[n],e},clear:function(){return t.options?(t.options.commonParams.context={},e):e},get:function(e){var n,r,o;return null===(o=null===(r=null===(n=t.options)||void 0===n?void 0:n.commonParams)||void 0===r?void 0:r.context)||void 0===o?void 0:o[e]},toObject:function(){var e,n,r;return"string"===typeof(null===(e=t.options)||void 0===e?void 0:e.commonParams.context)?{}:Bn({},null===(r=null===(n=t.options)||void 0===n?void 0:n.commonParams)||void 0===r?void 0:r.context)}};return e},enumerable:!1,configurable:!0}),e.prototype._shouldSend=function(t){var e,n;if(!(null===(e=this.options)||void 0===e?void 0:e.monitors)||!t||!zn(t)||!(null===(n=t.event)||void 0===n?void 0:n.ev_type))return!1;var r=this.options.monitors;if("AjaxMonitor"===t.name||"FetchMonitor"===t.name){var o=hr(Cr||[]);if(o&&o.test(t.event.ax_url))return!1}return!!r.BaseMonitor.webIDHit||!!r.BaseMonitor.sampleHit&&("PathMonitor"===t.name?To({sendParams:t,pageViewMonitor:r.PageViewMonitor,baseMonitor:r.BaseMonitor}):"PageViewMonitor"===t.name?Uo({pageViewMonitor:r.PageViewMonitor}):"AjaxMonitor"===t.name||"FetchMonitor"===t.name?Ao({sendParams:t,ajaxMonitor:r.AjaxMonitor}):"PerformanceMonitor"===t.name?Do({performanceMonitor:r.PerformanceMonitor}):"EmitMonitor"===t.name?ko({sendParams:t,flexibleMonitor:r.FlexibleMonitor}):"StaticErrorMonitor"===t.name?Io({sendParams:t,staticErrorMonitor:r.StaticErrorMonitor}):"HijackMonitor"===t.name?Bo({hijackMonitor:r.HijackMonitor}):"JSErrorMonitor"!==t.name||No({jsErrorMonitor:r.JSErrorMonitor}))},e.prototype._modifyEvent=function(t){var e;if(!(null===(e=this.options)||void 0===e?void 0:e.monitors)||!t||!zn(t))return{};var n=this.options.monitors;return"PerformanceMonitor"===t.name?Fo({sendParams:t,performanceMonitor:n.PerformanceMonitor}):"PathMonitor"===t.name?Jo({sendParams:t,baseMonitor:n.BaseMonitor,effect:this.updateConfig}):t},e.prototype.buildParams=function(t){var e,n,r,o,i=t.event||{},a=t.overrides||{},s=a.context,c=Nn(a,["context"]),u=Bn({},null!==(n=null===(e=this.options)||void 0===e?void 0:e.commonParams)&&void 0!==n?n:{});if(zn(s)){var l=Bn(Bn({},null!==(r=zn(u.context)&&u.context)&&void 0!==r?r:{}),s||{});u.context=l}var p=Bn(Bn(Bn({},i),u||{}),c);return p=this.normalizeEvent(p),(null===(o=this.options)||void 0===o?void 0:o.custom)&&Wn(this.options.custom.beforeSend)&&(p=this.options.custom.beforeSend(p||{})),p},e.prototype._request=function(t){var e;if(t&&t.event){var n=t.type,r=t.event,o=window.automation_test_info;if(o&&(r.automation_test_info=o),"beacon"===(null===(e=this.options)||void 0===e?void 0:e.commonParams.report_type)&&navigator&&navigator.sendBeacon){var i=JSON.stringify(r);navigator.sendBeacon(this.getReportURL(),i)}else this.transport&&("get"!==n?"post"===n&&this.transport.postEvent(r):this.transport.getEvent(r))}},e.prototype.chechIsReady=function(){return 2===this.clientStatus},e.prototype.updateStatus=function(){var e=this;switch(this.clientStatus){case 0:this.clientStatus=1;break;case 1:if(this.clientStatus=2,!this.preQueue.length)return;this.preQueue.forEach(function(n){t.prototype.sendEvent.call(e,n)}),this.preQueue=[]}},e.prototype.getBatchReportURL=function(){var t;return"https://"+(null===(t=this.options)||void 0===t?void 0:t.commonParams.report_domain)+"/log/sentry/v2/api/slardar/batch/"},e.prototype.normalizeOptions=function(t){var e;return $n({},null!==(e=this.options)&&void 0!==e?e:{},t)},e.prototype.normalizeEvent=function(t){var e=Bn(Bn({},t),{url:window.location.href,client_time:Date.now()});return zn(t.context)&&(e.context=JSON.stringify(t.context)),e||{}},e}(yo);function Ao(t){var e=t.sendParams,n=t.ajaxMonitor;if(!n)return!0;if(n.webIDHit)return!0;if(!n.sampleHit)return!1;var r=n.whitelistUrls;if(Vn(r)&&r.length>0){var o=hr(n.whitelistUrls||[]);return!(!o||!o.test(e.event.ax_url))}var i=hr(n.ignore||[]);if(i&&i.test(e.event.ax_url))return!1;var a=n.statusCodeSample;if(a&&Xn(a,e.event.ax_status))return Eo(a[e.event.ax_status]);var s=n.requestUrlSample;if(s){var c=!1,u=!1;if(s.forEach(function(t){if(!c){var n=hr([t.url]);(null===n||void 0===n?void 0:n.test(e.event.ax_url))&&(c=!0,u=Eo(t.sampleRate))}}),c)return u}return!0}function To(t){var e=t.sendParams,n=t.pageViewMonitor,r=t.baseMonitor;return 1===r.appTypeSetting.type&&e.event.type===r.appTypeSetting.SPA&&(!n||(!!n.webIDHit||!!n.sampleHit))}function Uo(t){var e=t.pageViewMonitor;return!e||(!!e.webIDHit||!!e.sampleHit)}function Do(t){var e=t.performanceMonitor;return!e||(!!e.webIDHit||!!e.sampleHit)}function ko(t){var e=t.sendParams,n=t.flexibleMonitor;if(!n)return!0;if(n.webIDHit)return!0;if(!n.sampleHit)return!1;var r=n.eventNameHit;if(r){var o=e.event.flexible_data_list[0].event_name;if(Xn(r,o))return Eo(r[o])}return!0}function Io(t){var e=t.sendParams,n=t.staticErrorMonitor;if(!n)return!0;if(n.webIDHit)return!0;if(!n.sampleHit)return!1;var r=hr(n.ignore||[]);return!r||!r.test(e.event.st_src)}function Bo(t){var e=t.hijackMonitor;return!e||(!!e.webIDHit||!!e.sampleHit)}function No(t){var e=t.jsErrorMonitor;return!e||(!!e.webIDHit||!!e.sampleHit)}function Fo(t){var e,n=t.sendParams,r=t.performanceMonitor;if(!r)return n;if(!or())return{};if(n.event.isAsync)e=n.event.load>r.spaSlowSessionTime;else{var o=window.performance.timing;e=o.loadEventEnd-o.navigationStart>r.slowSessionTime}if(n.event.resources&&Vn(n.event.resources)){var i=hr(r.geckoUrls||[]);n.event.resources.forEach(function(t,e){var r,o,a,s;(null===(r=n.event.resources)||void 0===r?void 0:r[e])&&zn(null===(o=n.event.resources)||void 0===o?void 0:o[e])&&Wn(null===(a=n.event.resources)||void 0===a?void 0:a[e].toJSON)&&(n.event.resources[e]=null===(s=n.event.resources)||void 0===s?void 0:s[e].toJSON(),n.event.resources[e].is_gecko=i&&i.test(t.name||"")?"1":"0")})}return r.webIDHitStaticResource||r.sampleHitStaticResource?n.event.upload_reason="sample":e?n.event.upload_reason="slow_session":(delete n.event.resources,n.event.has_resource=0),n}function Jo(t){var e=t.sendParams,n=t.baseMonitor,r=t.effect;return 1===n.appTypeSetting.type&&n.appTypeSetting.SPA===e.event.type&&(r({commonParams:{pid:e.event.path}}),delete e.event.type,delete e.event.path),{}}var qo=Object.freeze({__proto__:null,BrowserClient:Lo,shouldSendAjaxEvent:Ao,shouldSendPathEvent:To,shouldSendPageViewEvent:Uo,shouldSendPerformanceEvent:Do,shouldSendFlexibleEvent:ko,shouldSendStaticErrorEvent:Io,shouldSendHijackEvent:Bo,shouldSendJSErrorEvent:No,modifyPerformanceEvent:Fo,modifyPathEvent:Jo}),zo=function(){var t="";try{t=function(t,e){var n,r;if(!t||!e)return"";var o=t.split(";"),i={};try{for(var a=Fn(o),s=a.next();!s.done;s=a.next()){var c=s.value.split("="),u=Qn(c[0])&&c[0].trim();u&&Qn(c[1])&&(i[u]=c[1].trim())}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i[e]||""}(document.cookie,"MONITOR_WEB_ID")}catch(e){}return t};function Wo(t){return $n({},{commonParams:{version:"",hostname:window.location.hostname,protocol:window.location.protocol.slice(0,-1),url:window.location.href,slardar_session_id:Lr,sample_rate:xr,pid:location.pathname,report_domain:So,screen_resolution:vr(),network_type:mr(),bid:"",context:{},slardar_web_id:zo()||Ar,report_type:"xhr",performanceAuto:!0,reportURLSingle:"",region:"cn",env:"production",refreshPrecollectedContext:!1,maxBatchReportLength:10,batchReportWait:1e3},flags:{hookPath:!0,hookXHR:!0,hookFetch:!0,enableSizeStats:!0,enableFMP:!0,enablePerformance:!0,enableResourcePerformance:!0,enableStaticError:!0,enableCatchJSError:!0,enableCatchGlobalJSError:!0,enableCatchJSErrorV2:!1,enableCrash:!1,enableMemoryRecord:!1,enableFPSJankTimesMonitor:!1,enableBreadcrumb:!0,catchUnhandledRejection:!0,catchUnhandledRejectionV2:!0,hookConsole:!1,hookDom:!0},monitors:{BaseMonitor:{appTypeSetting:{type:0,SPA:"",renderType:0},webIDHit:!1,sampleHit:yr(1)},PageViewMonitor:{webIDHit:!1,sampleHit:yr(1)},JSErrorMonitor:{webIDHit:!1,sampleHit:yr(1),webIDHitBehavior:yr(0),sampleHitBehavior:yr(0),ignoreErrors:[],whitelistUrls:[],blacklistUrls:[],download_link:""},AjaxMonitor:{webIDHit:!1,sampleHit:yr(1),sampleHitTrace:yr(0),ignore:Cr,abort:!1,whitelistUrls:[],statusCodeSample:{},requestUrlSample:[],errorRequestCollect:!1},PerformanceMonitor:{webIDHit:!1,sampleHit:yr(1),webIDHitStaticResource:!1,sampleHitStaticResource:yr(Rr),slowSessionTime:Or,spaSlowSessionTime:Hr,geckoUrls:[],interval:0,checkPoint:[]},FlexibleMonitor:{webIDHit:!1,sampleHit:yr(1),eventNameHit:{},eventNameSampleHit:yr(1)},StaticErrorMonitor:{webIDHit:!1,sampleHit:yr(1),ignore:Cr},HijackMonitor:{webIDHit:!1,sampleHit:yr(jr)},FMPMonitor:{}},plugins:{render:{enable:0},spa:{enable:0,type:""},behavior:{enable:0,slardar_web_ids:[],sample_rate:0,download_link:wo},sentry:{enable:0,behavior_enable:0,behavior_sample_rate:0,behavior_slardar_web_ids:[],download_link:bo}},custom:{beforeSend:function(t){return t}},heatmap:{openList:[]}},t)}var Qo=Object.freeze({__proto__:null,getSlardarWebId:zo,getDefaultBaseClientConfig:Wo}),Vo=function(t,e){var n=!1;return t?(t.forEach(function(t){n||!t.condition.is_default&&"slardar_web_id"===t.condition.field&&nr(t.condition.values,e.web_id)&&(n=!0)}),n):n},Xo=function(t){var e=!1;return!t||(t.forEach(function(t){t.condition.field&&e||(e=Eo(Number(t.value)))}),e)},Go=function(t){var e=[];if(t)try{e=JSON.parse(t)}catch(n){e=[]}return e},$o=function(t){var e=[];return t.forEach(function(t){if(t.value){var n=Go(t.value);e.push.apply(e,qn([],Jn(n)))}}),e},Yo=function(t,e){var n,r;void 0===e&&(e=!1);try{for(var o=Fn(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.value)return"true"===a.value}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return e},Ko=function(t){var e=[];return t.forEach(function(t){"pid"===t.condition.field.toLowerCase()&&"like"===t.condition.op.toLowerCase()&&t.value?e.push({pids:Go(t.value),value:parseInt(t.value,10),isDefault:!1}):t.condition.is_default&&e.push({pids:[],value:parseInt(t.value,10),isDefault:!0})}),e},Zo=function(t,e){var n={},r=[];return t.forEach(function(t){t.condition.field===e&&t.condition.values&&t.condition.values.forEach(function(e){Xn(n,e)||(n[e]=Number(t.value)||0,r.push({url:e,sampleRate:n[e]}))})}),{flatten:n,list:r}},ti=function(t){var e,n,r=t.setting,o=t.info,i=$n({PageViewMonitor:{},JSErrorMonitor:{},AjaxMonitor:{},PerformanceMonitor:{},FlexibleMonitor:{},StaticErrorMonitor:{},HijackMonitor:{},BaseMonitor:{appTypeSetting:{}},FMPMonitor:{}},r.monitors);r.ajaxWhitelistUrls&&Vn(r.ajaxWhitelistUrls)&&(i.AjaxMonitor.whitelistUrls=(i.AjaxMonitor.whitelistUrls||[]).concat(r.ajaxWhitelistUrls)),r.ignoreAjax&&Vn(r.ignoreAjax)&&(i.AjaxMonitor.ignore=(i.AjaxMonitor.ignore||[]).concat(r.ignoreAjax)),Xn(r,"geckoUrls")&&(i.PerformanceMonitor.geckoUrls=r.geckoUrls),r.ignoreStatic&&Vn(r.ignoreStatic)&&(i.StaticErrorMonitor.ignore=(i.StaticErrorMonitor.ignore||[]).concat(r.ignoreStatic)),(null===(e=r.plugins)||void 0===e?void 0:e.sentry)&&(i.JSErrorMonitor=Bn(Bn({},i.JSErrorMonitor||{}),r.plugins.sentry)),r.errorRelease&&(i.JSErrorMonitor.release=r.errorRelease),r.ignoreErrors&&Vn(r.ignoreErrors)&&(i.JSErrorMonitor.ignoreErrors=r.ignoreErrors),r.errorBlacklistUrls&&Vn(r.errorBlacklistUrls)&&(i.JSErrorMonitor.blacklistUrls=r.errorBlacklistUrls),r.errorWhitelistUrls&&Vn(r.errorWhitelistUrls)&&(i.JSErrorMonitor.whitelistUrls=r.errorWhitelistUrls),r.fmpIgnoreTags&&Vn(r.fmpIgnoreTags)&&(i.FMPMonitor.ignoreTags=r.fmpIgnoreTags),Xn(r,"sampleRate")&&(i.BaseMonitor.sampleHit=Eo(r.sampleRate));var a=r.plugins;if(a&&zn(a)){if(Xn(a,"spa")){var s=a.spa;s&&Xn(s,"enable")&&(i.BaseMonitor.appTypeSetting.type=Number(s.enable)),s&&Xn(s,"type")&&(i.BaseMonitor.appTypeSetting.SPA=s.type)}if(a.render){var c=null===(n=r.plugins)||void 0===n?void 0:n.render;if(c&&zn(c)&&Xn(c,"enable")){var u=[{pids:[],value:c.enable,isDefault:!0}];i.BaseMonitor.appTypeSetting.renderType=ii({renderRules:u,pid:o.pid})}}}return i},ei=function(t){var e;return void 0===t&&(t={}),$n({sentry:{},behavior:{},spa:{},render:{}},null!==(e=t.plugins)&&void 0!==e?e:{})},ni=function(t){var e;void 0===t&&(t={});var n=$n({},null!==(e=t.commonParams)&&void 0!==e?e:{});if(!zn(t))return n;var r=["bid","context","pid","slardar_web_id","slardar_session_id","performanceAuto","report_type","region","env","refreshPrecollectedContext","maxBatchReportLength","batchReportWait"];return Gn(t,function(t,e){nr(r,t)&&("report_domain"===t&&"mon-va.byteoversea.com"===e?n.region="maliva":n[t]=e)}),Gn({cookieid:"slardar_web_id",sampleRate:"sample_rate",reportDomain:"report_domain",domain:"report_domain",sample_rate:"sample_rate",slardar_web_id:"slardar_web_id"},function(e,r){Xn(t,e)&&(n[r]=t[e])}),n.slardar_web_id&&(n.slardar_web_id=n.slardar_web_id.toString()),n},ri=function(t){var e;void 0===t&&(t={});var n=$n({},null!==(e=t.flags)&&void 0!==e?e:{});if(!zn(t))return n;var r=["hookPath","hookXHR","hookFetch","enableSizeStats","enableFMP","enablePerformance","enableStaticError","enableCatchJSError","enableCatchJSErrorV2","enableCatchGlobalJSError","enableResourcePerformance","enableCrash","enableMemoryRecord","enableFPSJankTimesMonitor","enableBreadcrumb","catchUnhandledRejection","catchUnhandledRejectionV2","hookConsole","hookDom"];return Gn(t,function(t,e){nr(r,t)&&(n[t]=e)}),n};function oi(t,e){var n,r,o,i,a,s,c,u={PageViewMonitor:{},JSErrorMonitor:{},AjaxMonitor:{},PerformanceMonitor:{},FlexibleMonitor:{},StaticErrorMonitor:{},HijackMonitor:{},BaseMonitor:{}},l=null!==(n=t.setting)&&void 0!==n?n:{};if((null===(o=null===(r=l.page_view)||void 0===r?void 0:r.enable_rate)||void 0===o?void 0:o.length)&&(u.PageViewMonitor.webIDHit=Vo(l.page_view.enable_rate,e),u.PageViewMonitor.sampleHit=Xo(l.page_view.enable_rate)),l.jserr&&((null===(i=l.jserr.enable_rate)||void 0===i?void 0:i.length)&&(u.JSErrorMonitor.webIDHit=Vo(l.jserr.enable_rate,e),u.JSErrorMonitor.sampleHit=Xo(l.jserr.enable_rate)),l.jserr.ignore_errors&&(u.JSErrorMonitor.ignoreErrors=$o(l.jserr.ignore_errors)),l.jserr.blacklist_urls&&(u.JSErrorMonitor.blacklistUrls=$o(l.jserr.blacklist_urls)),l.jserr.whitelist_urls&&(u.JSErrorMonitor.whitelistUrls=$o(l.jserr.whitelist_urls))),l.ajax&&(l.ajax.enable_rate&&(u.AjaxMonitor.webIDHit=Vo(l.ajax.enable_rate,e),u.AjaxMonitor.sampleHit=Xo(l.ajax.enable_rate)),l.ajax.request_sample_rate&&(u.AjaxMonitor.statusCodeSample=Zo(l.ajax.request_sample_rate,"status_code").flatten,u.AjaxMonitor.requestUrlSample=Zo(l.ajax.request_sample_rate,"request_url").list),l.ajax.trace_rate&&(u.AjaxMonitor.sampleHitTrace=Xo(l.ajax.trace_rate)),l.ajax.enable_request_param_collect_on_error&&(u.AjaxMonitor.errorRequestCollect=Yo(l.ajax.enable_request_param_collect_on_error))),(null===(a=l.static_resource)||void 0===a?void 0:a.enable_rate)&&(u.PerformanceMonitor.webIDHitStaticResource=Vo(l.static_resource.enable_rate,e),u.PerformanceMonitor.sampleHitStaticResource=Xo(l.static_resource.enable_rate)),(null===(s=l.performance)||void 0===s?void 0:s.enable_rate)&&(u.PerformanceMonitor.webIDHit=Vo(l.performance.enable_rate,e),u.PerformanceMonitor.sampleHit=Xo(l.performance.enable_rate)),l.flexible&&(l.flexible.enable_rate&&(u.FlexibleMonitor.webIDHit=Vo(l.flexible.enable_rate,e),u.FlexibleMonitor.sampleHit=Xo(l.flexible.enable_rate)),l.flexible.event_name_sample_rate&&(u.FlexibleMonitor.eventNameHit=Zo(l.flexible.event_name_sample_rate,"event_name").flatten,u.FlexibleMonitor.eventNameSampleHit=Xo(l.flexible.event_name_sample_rate))),(null===(c=l.static_err)||void 0===c?void 0:c.enable_rate)&&(u.StaticErrorMonitor.webIDHit=Vo(l.static_err.enable_rate,e),u.StaticErrorMonitor.sampleHit=Xo(l.static_err.enable_rate)),l.general){var p=l.general.app_type_setting;if(p){var f={type:Number(p.app_type[0].value),SPA:p.app_type_spa[0].value,renderType:ii({renderRules:Ko(p.app_render_type),pid:e.pid})};u.BaseMonitor.appTypeSetting=f}}var d=t.whitelist;return Vn(d)&&d.forEach(function(t){e.web_id===t&&(u.BaseMonitor.webIDHit=!0,u.AjaxMonitor.sampleHitTrace=!0)}),u}function ii(t){var e=t.renderRules,n=t.pid;if(!e||!n)return 0;for(var r=0;r<e.length;r++){var o=e[r];if(Vn(o.pids)&&o.pids.length>0){var i=hr(o.pids);if(i&&i.test(n))return o.value}if(o.isDefault&&r===e.length-1)return o.value}return 0}var ai=Object.freeze({__proto__:null,convertUserSettingToMonitors:ti,getClientPluginsSetting:ei,convertUserSettingToCommonParams:ni,convertUserSettingToFlags:ri,convertServerSettingToMonitors:oi}),si=function(){function t(){var t=this;this.version="3.6.36",this.instance=function(){for(var e,n,r,o,i,a,s,c,u,l,p,f,d,h,v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];switch(v[0]){case"init":return void t.init(v[1]);case"config":return void t.config(v[1]);case"sendCustomCountLog":case"sendCustomTimeLog":case"emit":case"send":return void(t.shared.monitors.EmitMonitor?(e=t.shared.monitors.EmitMonitor).handOut.apply(e,qn([],Jn(v))):t.instance("precollect","emit",v));case"precollect":var g=t.shared.collect,y=t.finalConfig.commonParams.refreshPrecollectedContext?{}:{pid:t.finalConfig.commonParams.pid,url:t.finalConfig.commonParams.url,context:t.finalConfig.commonParams.context};if("sentry"===v[1])return void g.sentry.push({event:v[2],params:y});if("exception"===v[1]){var _=v[3]||{},b=_.context,w=Nn(_,["context"]),S=Bn(Bn({},zn(y.context)&&y.context),b);return y.context=S,void g.exception.push({exception:v[2],params:Bn(Bn({},y),w)})}if("error"===v[1]){if(!v[2]||!v[2][0])return;var E=v[2][0]||{};return jo(E)&&((E.error||E.message)&&g.jsError.push({event:E,params:y}),(null===(n=E.target)||void 0===n?void 0:n.tagName)&&g.staticError.push({event:E,params:y})),void(Co(E)&&g.jsError.push({event:E,params:y}))}return void("emit"===v[1]&&g.emit.push({event:v[2],params:y}));case"Sentry":var M=v[1];if(Wn(M)){var P=null===(o=null===(r=t.shared.monitors)||void 0===r?void 0:r.JSErrorMonitor)||void 0===o?void 0:o.getSentry();P?M(P):t.instance("precollect","sentry",v[1])}return;case"report":return void(t.client&&t.client.uploadQueue());case"performanceSend":return void(null===(s=null===(a=null===(i=t.shared.monitors)||void 0===i?void 0:i.PerformanceMonitor)||void 0===a?void 0:a.send)||void 0===s||s.call(a));case"performanceInit":return void(null===(l=null===(u=null===(c=t.shared.monitors)||void 0===c?void 0:c.PerformanceMonitor)||void 0===u?void 0:u.initAsync)||void 0===l||l.call(u,t.finalConfig.commonParams.pid));case"captureException":if(t.shared.monitors.JSExceptionMonitor){var x=Mo(t.shared.monitors.JSExceptionMonitor.buildEvent(v[1]),null!==(p=v[2])&&void 0!==p?p:{});null===(d=null===(f=t.client)||void 0===f?void 0:f.sendEvent)||void 0===d||d.call(f,x)}else t.instance("precollect","exception",v[1],v[2]);return;case"context":return void(t.client&&(null===(h=v[1])||void 0===h||h.call(v,t.client.contextAgent)));default:return}},this.changeReortType=function(e){var n;t.finalConfig.commonParams.report_type=e,null===(n=t.client)||void 0===n||n.updateConfig(t.finalConfig)},this.onClose=function(){gr(t.onCloseReport,t.visibilityChange)},this.visibilityChange=function(){"hidden"===document.visibilityState&&t.onCloseReport(),"visible"===document.visibilityState&&t.changeReortType("xhr")},this.onCloseReport=function(){var e;t.changeReortType("beacon"),null===(e=t.client)||void 0===e||e.uploadQueue()},this.defaultClientConfig=Wo({commonParams:{version:this.version}}),this.finalConfig=Wo({commonParams:{version:this.version}}),this.client=void 0,this.userConfig={},this.inited=!1,this.configed=!1,this.shared={config:this.finalConfig,instance:[],collect:{sentry:[],jsError:[],staticError:[],emit:[],exception:[]},monitors:{}},this.baseParams={bid:this.shared.config.commonParams.bid||"",pid:this.shared.config.commonParams.pid||""},this.serverSetting=this.__SLARDAR__REPALCE__HOLDER__,this.saveInstance()}return t.prototype.handleUserConfig=function(t){var e;this.userConfig=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0;r<t.length;)n=Zn(n,t[r]),r++;return n}(this.userConfig,t),(null===(e=this.userConfig)||void 0===e?void 0:e.onlyUseLocalSetting)&&(this.serverSetting={}),this.mergeSettings()},t.prototype.setBaseParams=function(){this.baseParams.bid=this.shared.config.commonParams.bid||"",this.baseParams.pid=this.shared.config.commonParams.pid||""},t.prototype.init=function(t){var e=this;this.handleUserConfig(t);var n=this.finalConfig;if(!this.inited){this.inited=!0,this.client=new Lo({reportURL:xo(n.commonParams.report_domain),maxBatchReportLength:n.commonParams.maxBatchReportLength,batchReportWait:n.commonParams.batchReportWait}),this.client.setOnOptionsUpdate(function(t){t&&t.commonParams.pid!==e.finalConfig.commonParams.pid&&e.handleUserConfig({pid:t.commonParams.pid})}),n.commonParams.refreshPrecollectedContext&&this.refreshPrecollectedContext();var r=this.setMonitors();this.setupMonitors(r),this.shared.instance&&Vn(this.shared.instance)&&this.shared.instance.push(n.commonParams.bid),this.getServerSetting(n.commonParams.bid),this.onClose()}},t.prototype.config=function(t){var e;if(this.configed=!0,this.inited){this.handleUserConfig(t);var n=this.finalConfig;null===(e=this.client)||void 0===e||e.updateConfig(n)}else this.init(t);this.tryUnlockClient()},t.prototype.getServerSetting=function(t){var e=this;if(this.serverSetting)this.handleServerSetting();else{var n=Ro(this.finalConfig.commonParams.report_domain)+"?bid="+t;_r.get(n,{success:function(t){try{e.serverSetting=t.data||{},e.handleServerSetting()}catch(n){e.userConfig.sampleRate=.001,e.handleServerSetting()}},fail:function(){e.userConfig.sampleRate=.001,e.handleServerSetting()},withCredentials:!0})}},t.prototype.setMonitors=function(){var t,e,n=this,r=[],o=this.finalConfig.flags,i=this.finalConfig.commonParams;if(o.hookPath&&r.push(new lo),o.hookXHR&&r.push(new fo({commonParams:{web_id:i.slardar_web_id,bid:i.bid},ajaxMonitorOptions:this.finalConfig.monitors.AjaxMonitor})),o.hookFetch&&r.push(new ho({commonParams:{web_id:i.slardar_web_id,bid:i.bid},ajaxMonitorOptions:this.finalConfig.monitors.AjaxMonitor})),o.enableFMP){var a=null===(t=co())||void 0===t?void 0:t(this.finalConfig.monitors.FMPMonitor);this.shared.FMPMonitor=a}return(null===(e=this.shared)||void 0===e?void 0:e.monitors)&&r.forEach(function(t){n.shared.monitors[t.name]=t}),r},t.prototype.setupMonitors=function(t){var e=this;this.client&&this.client.sendEvent&&t.forEach(function(t){var n;t.setup(null===(n=e.client)||void 0===n?void 0:n.sendEvent)})},t.prototype.shouldSetClientEnable=function(){return"production"===this.finalConfig.commonParams.env},t.prototype.tryUnlockClient=function(){var t;null===(t=this.client)||void 0===t||t.setEnable(this.shouldSetClientEnable()&&this.configed&&!!this.serverSetting)},t.prototype.handleServerSetting=function(){var t,e;this.mergeSettings();var n=this.finalConfig;this.client.updateConfig(n),this.client.setTransport(),this.tryUnlockClient(),this.client.sendPageview(),this.shared.transport=this.client.transport,this.shared.sendEvent=this.client.sendEvent.bind(this.client),this.setCookie(n.commonParams.slardar_web_id),null===(t=this.shared.monitors.FetchMonitor)||void 0===t||t.updateConfig({commonParams:{web_id:n.commonParams.slardar_web_id,bid:n.commonParams.bid},ajaxMonitorOptions:n.monitors.AjaxMonitor}),null===(e=this.shared.monitors.AjaxMonitor)||void 0===e||e.updateConfig({commonParams:{web_id:n.commonParams.slardar_web_id,bid:n.commonParams.bid},ajaxMonitorOptions:n.monitors.AjaxMonitor}),this.loadMonitors(),n.flags.enableCatchJSError&&this.loadSentry(),n.heatmap.openList.length&&this.loadHeatmap(),location.search.indexOf("slardar_heatmap_draw")>-1&&this.loadHeatmapDraw()},t.prototype.loadSentry=function(){var t=this;Ur(bo,function(){var e=Oo({name:"SetSentryMonitors",version:t.version});if(e){var n=new e({catchUnhandledRejection:t.finalConfig.flags.catchUnhandledRejection,hookConsole:t.finalConfig.flags.hookConsole,hookDom:t.finalConfig.flags.hookDom,memoryRecordMonitor:t.shared.monitors.MemoryRecordMonitor,collect:t.shared.collect,sendEvent:t.client.sendEvent,jsErrorOptions:t.shared.config.monitors.JSErrorMonitor});n.init(),t.shared.monitors=Bn(Bn({},t.shared.monitors),n.getInstalledMonitors())}})},t.prototype.loadMonitors=function(){var t=this;Ur("https://sf16-scmcdn-va.ibytedtos.com/goofy/slardar/fe/sdk/plugins/monitors.3.6.36.maliva.js",function(){var e,n=Oo({name:"SetMonitors",version:t.version});if(n)try{var r=new n({config:t.finalConfig,fmpMonitor:t.shared.FMPMonitor,report:function(){return t.instance("report")},sendEvent:null===(e=t.client)||void 0===e?void 0:e.sendEvent,captureException:function(e){return t.instance("Sentry",function(t){t.captureException(e)})},collect:t.shared.collect});r.init(),t.shared.monitors=Bn(Bn({},t.shared.monitors),r.getInstalledMonitors())}catch(o){t.instance("Sentry",function(t){t.captureException(o);try{t.withScope(function(e){e.setTag("from","slardar-sdk"),t.captureMessage("SLARDAR_ERROR: "+typeof n),t.captureMessage("SLARDAR_ERROR: "+n.toString())})}catch(e){t.withScope(function(n){n.setTag("from","slardar-sdk"),t.captureException(e)})}})}})},t.prototype.loadHeatmap=function(){var t=this;Ur("https://sf16-scmcdn-va.ibytedtos.com/goofy/slardar/fe/sdk/plugins/heatmap.3.6.36.maliva.js",function(){var e=Oo({name:"SetHeatmap",version:t.version});if(e){var n=new e({config:t.finalConfig,report:function(){return t.instance("report")},sendEvent:t.client.sendEvent,collect:t.shared.collect,pathMonitor:t.shared.monitors.PathMonitor,buildSendParams:t.client.buildSendParams,reportURL:t.client.getReportURL()});n.init(),t.shared.monitors=Bn(Bn({},t.shared.monitors),n.getInstalledMonitors())}})},t.prototype.loadHeatmapDraw=function(){var t=this;Ur("https://sf16-scmcdn-va.ibytedtos.com/goofy/slardar/fe/sdk/plugins/heatmap-draw.3.6.36.maliva.js",function(){var e=Oo({name:"SetHeatmapDraw",version:t.version});e&&new e({config:t.finalConfig,pathMonitor:t.shared.monitors.PathMonitor}).init()})},t.prototype.setCookie=function(t){try{t&&(document.cookie="MONITOR_WEB_ID="+t+";max-age=7776000;domain="+location.hostname+";path=/")}catch(e){}},t.prototype.normalizeSetting=function(t){return{commonParams:this.getClientCommonParams(t),flags:this.getClientFlags(t),plugins:this.getClientPluginsSetting(t),monitors:this.getClientMonitorsSetting(t),custom:this.getClientCustom(t),heatmap:this.getClientHeatmap(t)}},t.prototype.normalizeServerSetting=function(t){var e;return Xn(t,"setting")?{commonParams:ni(t),monitors:oi(t,this.getNormoalizeInfo()),heatmap:t.heatmap}:this.normalizeSetting({cookieid:t.cookieid,reportDomain:t.reportDomain,bid:t.bid,plugins:t.plugins,heatmap:null!==(e=t.heatmap)&&void 0!==e?e:{openList:[]}})},t.prototype.getClientHeatmap=function(t){var e;return null!==(e=t.heatmap)&&void 0!==e?e:{}},t.prototype.mergeSettings=function(){var t=this.serverSetting?this.normalizeServerSetting(this.serverSetting):{},e=this.normalizeSetting(this.userConfig),n=$n(this.defaultClientConfig,t,e);n.commonParams.reportURLSingle=Po(n.commonParams.report_domain),n.commonParams.pid=this.getPid(n),this.shared.config=n,this.setBaseParams(),this.finalConfig=n},t.prototype.getPid=function(t){if(t.commonParams.pid)return t.commonParams.pid;var e=t.monitors.BaseMonitor;return 1===e.appTypeSetting.type&&"hash"===e.appTypeSetting.SPA?location.hash.slice(1)||"/":location.pathname},t.prototype.getClientCommonParams=function(t){return ni(t)},t.prototype.getClientFlags=function(t){return ri(t)},t.prototype.getClientCustom=function(t){var e={};return t.beforeSend&&Wn(t.beforeSend)&&(e.beforeSend=t.beforeSend),e},t.prototype.getClientMonitorsSetting=function(t){return ti({setting:t,info:this.getNormoalizeInfo()})},t.prototype.getClientPluginsSetting=function(t){return ei(t)},t.prototype.getNormoalizeInfo=function(){return{web_id:this.finalConfig.commonParams.slardar_web_id,pid:this.finalConfig.commonParams.pid}},t.prototype.saveInstance=function(){window.__SLARDAR__||(window.__SLARDAR__={}),window.__SLARDAR__&&!Vn(window.__SLARDAR__.instances)&&(window.__SLARDAR__.instances=[]),window.__SLARDAR__&&Vn(window.__SLARDAR__.instances)&&window.__SLARDAR__.instances.push({version:this.version})},t.prototype.refreshPrecollectedContext=function(){var t,e=this;Gn(null!==(t=this.shared.collect)&&void 0!==t?t:{},function(t){var n;null===(n=e.shared.collect)||void 0===n||n[t].forEach(function(t){return t.params={}})})},t}(),ci=lr;if(rr()){var ui=new si;(ci=ui.instance).version=ui.version,ci.shared=ui.shared,ci.SlardarBrowser=si,ci._baseParams=ui.baseParams}var li=ci,pi=Object.freeze({__proto__:null}),fi=Object.freeze({__proto__:null}),di=Object.freeze({__proto__:null});e.BrowserOptionTypes=fi,e.BrowserReportTypes=di,e.BrowserSlardar=si,e.BrowserTypes=pi,e.browserClient=qo,e.browserConfig=Qo,e.browserNormalize=ai,e.browserUtils=Ho,e.default=li}).call(this,n(35))}}]);